# 工资结算app相关说明
当前版本为工资计算demo，目的在于大致对欣灵电器生产线上工人工资进行结算，提供管理和工人以参考。
大致思路为：

## 确定工序和物料对应的单价
首先将物料分组，是因为不同的物料在同一段工序可能会单价相同，避免重复配置。
其次，提供一个配置物料和工序对应的单价页面，可自行修改调整。
这样，在有了工序、物料以及报工数之后就可以算出对应的计件工资总数。
然后，需要提供一个配置不同计时方式人员工资的页面；
在有出勤信息之后，就可以算出计时工资。

## 确定人员的工资计算方式
通过主数据配置，目前分为`计件工资`和`计时工资`，通过此项配置，不同的人员在工资计算的时候使用不同的计算方法。

## 计件工资
不同物料在不同的工序（可以转化为工段）有它对应的单价，通过报工app可以获得不同的工段对不同物料的报工数量，这样可以算出整个工段在某段时间内的总体工资。

在上述的时间段内，可以看到工段中具体的人员，通过上述方法可以获得在这段时间内此工段总工资，之后就可以通过平分或者加权来给不同员工分配工资。

## 计时工资
计时工资又分为：时薪/日薪/月薪/底薪。
此处的计时来源与考勤app。

## 其他app需要提供的接口
### 报工app
需要报工app返回当月以工段分组，返回报工信息，后边需要修改为以报工组为分组，讲报工量细化到每一天的量
```json
{
  "app_group": "乐清工业云",
  "app_name": "生产报工",
  "code": "success",
  "data": [
    {
      "groupCode": "bg_ryfz_6t90_z3",
      "report": [
        {
          "materielCode": "materiel_t901z30adc12v5_ynb",
          "qualified_count": 100,
          "unqualified_count": 0
        },
        {
          "materielCode": "materiel_t901h40adc12v4_23",
          "qualified_count": 0,
          "unqualified_count": 0
        }
      ]
    },
    {
      "groupCode": "bg_ryfz_6t90_z1",
      "report": [
        {
          "materielCode": "materiel_t901h40adc12v4_23",
          "qualified_count": 28,
          "unqualified_count": 0
        }
      ]
    },
    {
      "groupCode": "bg_ryfz_6t90_z2",
      "report": [
        {
          "materielCode": "materiel_t901h40adc12v4_23",
          "qualified_count": 0,
          "unqualified_count": 0
        }
      ]
    }
  ],
  "info": ""
}
```


## TODO-LIST
1. 优化现有代码
2. 以报工组为单位，微调报工数量
3. 提供页面编辑员工工资计算中权重因子
4. 从报工模块获取数据，需要详细到每天报工内容
5. 调整当前工资计算结果返回内容和逻辑，（以人为基准，并不是以报工和考勤信息为基准）
